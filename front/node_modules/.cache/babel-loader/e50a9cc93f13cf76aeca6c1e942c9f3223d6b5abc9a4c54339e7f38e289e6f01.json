{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-17e69338\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"home\"\n};\nconst _hoisted_2 = {\n  class: \"user-profile\"\n};\nconst _hoisted_3 = {\n  class: \"posts\"\n};\nconst _hoisted_4 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_comment = _resolveComponent(\"comment\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createTextVNode(\" 全部貼文 \"), _createVNode(_component_router_link, {\n    to: \"/mypost\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"我的貼文\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" | \"), _createVNode(_component_router_link, {\n    to: \"/login\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"登出\")]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.posts, post => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"post\",\n      key: post.id\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h2\", null, _toDisplayString(post.title), 1 /* TEXT */)]), _createElementVNode(\"p\", null, _toDisplayString(post.username + \" : 於\" + post.createdAt + \"發布\"), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(post.context), 1 /* TEXT */), _createVNode(_component_comment, {\n      \"initial-comments\": post.comment\n    }, null, 8 /* PROPS */, [\"initial-comments\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_router_link","to","_hoisted_3","_Fragment","_renderList","$data","posts","post","key","id","_hoisted_4","_toDisplayString","title","username","createdAt","context","_component_comment","comment"],"sources":["/Users/laken/Documents/GitHub/social-platforms/front/src/views/MainView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"user-profile\">\n    全部貼文\n      <router-link to=\"/mypost\">我的貼文</router-link> |\n      <router-link to=\"/login\">登出</router-link>\n    </div>\n    <div class=\"posts\">\n      <div class=\"post\" v-for=\"post in posts\" :key=\"post.id\">\n        <div style=\"display: flex;justify-content: center;\">\n          <h2>{{ post.title }}</h2>\n\n        </div>\n        <p>{{ post.username + \" : 於\" + post.createdAt + \"發布\"}}</p>\n        <p>{{ post.context }}</p>\n        <comment :initial-comments=\"post.comment\"></comment>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Comment from \"@/components/CommentSection.vue\";\nimport { allpost } from \"@/api.js\"\nimport '@fortawesome/fontawesome-free/css/all.css'; // 引入Font Awesome的CSS样式\nexport default {\n  name: \"HomePage\",\n  components: {\n    Comment,\n  },\n  data() {\n    return {\n      title: \"\",\n      context: \"\",\n      posts: [],\n      newCommentText: \"\",\n      showDialog: false,\n    }\n  },\n  mounted() {\n    this.fetchPosts(); // 在 mounted 生命周期钩子中调用获取数据的方法\n  },\n  methods: {\n    fetchPosts() {\n        allpost()\n        .then((response) => {\n          let data = response.data; // 将获取到的数据赋值给组件的 data 属性\n          let datasort = data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n          this.posts = datasort.map(a => {\n            let b = a.comment\n            a.comment = [{postID: a.postID}, ...b];\n            return a;\n          });\n          console.log(datasort);\n        }).catch((error) => {\n          console.error(error);\n        });\n      },\n    addComment(post) {\n      const newComment = {\n        id: Date.now(),\n        text: this.newCommentText,\n      };\n      post.comments.push(newComment);\n      this.newCommentText = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.home {\n  /* 頁面的樣式 */\n}\n\n.user-profile {\n  background: #d6fbae;\n  color: #f0f0f0;\n  padding: 10px;\n  height: 20px;\n  display: inline-block;\n  vertical-align: middle;\n  padding: 12px 24px;\n  border: 1px solid #96b07a;\n  border-radius: 8px;\n  background: #d6fbae;\n  background: -moz-linear-gradient(top, #d6fbae, #96b07a);\n  background: linear-gradient(to bottom, #d6fbae, #96b07a);\n  -webkit-box-shadow: #ffffd1 0px 0px 40px 0px;\n  -moz-box-shadow: #ffffd1 0px 0px 40px 0px;\n  box-shadow: #ffffd1 0px 0px 40px 0px;\n  text-shadow: #ffffe2 1px 1px 1px;\n  font: normal normal bold 20px arial;\n  color: #111111;\n  text-decoration: none;\n  a {\n    font-weight: bold;\n    color: #2c3e50;\n\n    &.router-link-exact-active {\n      color: #42b983;\n    }\n  }\n}\n.form-group {\n  margin-bottom: 10px;\n  text-align: left;\n  color: #ffffff;\n}\ninput[type=\"text\"],\ninput[type=\"textarea\"] {\n  -webkit-appearance: none;\n  width: 70%;\n  padding: 5px;\n}\n.posts {\n  margin-top: 20px;\n  color: #ffffff;\n}\n\n.post {\n  margin-bottom: 20px;\n  margin-right: 20px;\n  margin-left: 20px;\n  border: 2px solid white;\n}\n\n.post h2 {\n    text-decoration: underline;\n}\n\n.button {\n    display: inline-block;\n    text-align: center;\n    vertical-align: middle;\n    padding: 6px 12px;\n    border: 1px solid #258f81;\n    border-radius: 8px;\n    background: #3ce9d1;\n    background: -moz-linear-gradient(top, #3ce9d1, #258f81);\n    background: linear-gradient(to bottom, #3ce9d1, #258f81);\n    -webkit-box-shadow: #37d7c1 0px 0px 40px 0px;\n    -moz-box-shadow: #37d7c1 0px 0px 40px 0px;\n    box-shadow: #37d7c1 0px 0px 40px 0px;\n    text-shadow: #175a51 1px 1px 1px;\n    font: normal normal bold 10px arial;\n    color: #ffffff;\n    text-decoration: none;\n    height: 30px;\n}\n.button:hover {\n    border: 1px solid #2eb3a1;\n    background: #48fffb;\n    background: -moz-linear-gradient(top, #48fffb, #2cac9b);\n    background: linear-gradient(to bottom, #48fffb, #2cac9b);\n    color: #ffffff;\n    text-decoration: none;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAc;;EAKpBA,KAAK,EAAC;AAAO;;EAETC,KAA8C,EAA9C;IAAA;IAAA;EAAA;AAA8C;;;;uBARzDC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJC,mBAAA,CAIM,OAJNC,UAIM,G,iBAJoB,QAExB,GAAAC,YAAA,CAA4CC,sBAAA;IAA/BC,EAAE,EAAC;EAAS;sBAAC,MAAI,C,iBAAJ,MAAI,E;;uBAAc,KAC5C,GAAAF,YAAA,CAAyCC,sBAAA;IAA5BC,EAAE,EAAC;EAAQ;sBAAC,MAAE,C,iBAAF,IAAE,E;;QAE7BJ,mBAAA,CAUM,OAVNK,UAUM,I,kBATJP,mBAAA,CAQMQ,SAAA,QAAAC,WAAA,CAR2BC,KAAA,CAAAC,KAAK,EAAbC,IAAI;yBAA7BZ,mBAAA,CAQM;MARDF,KAAK,EAAC,MAAM;MAAwBe,GAAG,EAAED,IAAI,CAACE;QACjDZ,mBAAA,CAGM,OAHNa,UAGM,GAFJb,mBAAA,CAAyB,YAAAc,gBAAA,CAAlBJ,IAAI,CAACK,KAAK,iB,GAGnBf,mBAAA,CAA0D,WAAAc,gBAAA,CAApDJ,IAAI,CAACM,QAAQ,YAAYN,IAAI,CAACO,SAAS,yBAC7CjB,mBAAA,CAAyB,WAAAc,gBAAA,CAAnBJ,IAAI,CAACQ,OAAO,kBAClBhB,YAAA,CAAoDiB,kBAAA;MAA1C,kBAAgB,EAAET,IAAI,CAACU"},"metadata":{},"sourceType":"module","externalDependencies":[]}